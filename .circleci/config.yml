version: 2.1

jobs:
    install:
        docker:
            - image: svalinn/pymoab-visit-py2-18.04
        steps:
            - checkout
            - run:  pip install . --user

    test:
        docker:
            - image: svalinn/pymoab-visit-py2-18.04
        steps:
            - checkout
            - run:
                command: |
                    pip install coverage
                    coverage run --source=./IsogeomGenerator/ --omit=./IsogeomGenerator/__init__.py -m pytest
                    coverage report
                    coverage html
            - store_artifacts:
                path: htmlcov

workflows:
    build:
        jobs:
            - install
            - test
